"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[85504,53891],{85504:function(e,t,a){a.r(t),a.d(t,{default:function(){return g}});var r=a(85893),l=a(84588),s=a(69325),n=a(93348),c=a(24955),i=a.n(c),o=a(23493),d=a.n(o),u=a(82034),x=a(11163),m=a(67294),h=a(46977);let f=[{key:"↑ ↓",action:"选择"},{key:"Enter",action:"跳转"},{key:"Esc",action:"关闭"}];function g(e){let{cRef:t}=e,[a,n]=(0,m.useState)([]),[c,o]=(0,m.useState)(!1),[u,g]=(0,m.useState)(0),[y,j]=(0,m.useState)(null),[v,k]=(0,m.useState)(0),[w,N]=(0,m.useState)(0),[A,E]=(0,m.useState)(0),[_,I]=(0,m.useState)(0),[S,C]=(0,m.useState)(!1),[P,R]=(0,m.useState)(!1),L=(0,m.useRef)(null),O=(0,x.useRouter)();(0,h.y1)("ctrl+k",e=>{e.preventDefault(),o(!0)}),(0,h.y1)("down",e=>{P&&(e.preventDefault(),_<a.length-1&&I(_+1))},{enableOnFormTags:!0}),(0,h.y1)("up",e=>{P&&(e.preventDefault(),_>0&&I(_-1))},{enableOnFormTags:!0}),(0,h.y1)("esc",e=>{P&&(e.preventDefault(),o(!1))},{enableOnFormTags:!0}),(0,h.y1)("enter",e=>{P&&a.length>0&&T(F)},{enableOnFormTags:!0});let T=()=>{if(a.length>0){let e=a[_];window.location.href="".concat((0,s.JA)("SUB_PATH",""),"/").concat(e.slug||e.objectID)}},D=()=>{I(0),j(""),n([]),E(0),k(0),N(0),L.current&&(L.current.value="")};(0,m.useEffect)(()=>{o(!1)},[O]),(0,m.useEffect)(()=>{c?setTimeout(()=>{var e;null===(e=L.current)||void 0===e||e.focus()},100):D()},[c]),(0,m.useImperativeHandle)(t,()=>({openSearch:()=>{o(!0)}}));let F=i()((0,s.JA)("ALGOLIA_APP_ID"),(0,s.JA)("ALGOLIA_SEARCH_ONLY_APP_KEY")).initIndex((0,s.JA)("ALGOLIA_INDEX")),H=async(e,t)=>{if(j(e),g(t),n([]),E(0),k(0),N(0),I(0),e&&""!==e){C(!0);try{let{hits:a,nbHits:r,nbPages:s,processingTimeMS:c}=await F.search(e,{page:t,hitsPerPage:10});E(c),k(s),N(r),n(a),C(!1);let i=document.getElementById("search-wrapper").getElementsByClassName("replace");setTimeout(()=>{(0,l.Z)({doms:i,search:e,target:{element:"span",className:"font-bold border-b border-dashed"}})},200)}catch(e){console.error("Algolia search error:",e)}}},J=(0,m.useRef)(d()(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;H(e,t)},1e3)),B=(0,m.useRef)(null),G=e=>{let t=e.target.value;B.current&&clearTimeout(B.current),B.current=setTimeout(()=>{J.current(t)},800)},z=()=>{o(!1)};return(0,s.JA)("ALGOLIA_APP_ID")?(0,r.jsxs)("div",{id:"search-wrapper",className:"".concat(c?"opacity-100":"invisible opacity-0 pointer-events-none"," z-30 fixed h-screen w-screen left-0 top-0 sm:mt-[10vh] flex items-start justify-center mt-0"),children:[(0,r.jsxs)("div",{className:"".concat(c?"opacity-100":"invisible opacity-0 translate-y-10"," max-h-[80vh] flex flex-col justify-between w-full min-h-[10rem] h-full md:h-fit max-w-xl dark:bg-hexo-black-gray dark:border-gray-800 bg-white dark:bg- p-5 rounded-lg z-50 shadow border hover:border-blue-600 duration-300 transition-all "),children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("div",{className:"text-2xl text-blue-600 dark:text-yellow-600 font-bold",children:"搜索"}),(0,r.jsx)("div",{children:(0,r.jsx)("i",{className:"text-gray-600 fa-solid fa-xmark p-1 cursor-pointer hover:text-blue-600",onClick:z})})]}),(0,r.jsx)("input",{type:"text",placeholder:"在这里输入搜索关键词...",onChange:e=>G(e),onFocus:()=>R(!0),onBlur:()=>R(!1),className:"text-black dark:text-gray-200 bg-gray-50 dark:bg-gray-600 outline-blue-500 w-full px-4 my-2 py-1 mb-4 border rounded-md",ref:L}),(0,r.jsx)("div",{className:"mb-4",children:(0,r.jsx)(p,{})}),0===a.length&&y&&!S&&(0,r.jsx)("div",{children:(0,r.jsxs)("p",{className:" text-slate-600 text-center my-4 text-base",children:[" ","无法找到相关结果",(0,r.jsxs)("span",{className:"font-semibold",children:['"',y,'"']})]})}),(0,r.jsx)("ul",{className:"flex-1 overflow-auto",children:a.map((e,t)=>(0,r.jsx)("li",{onMouseEnter:()=>I(t),onClick:()=>T(t),className:"cursor-pointer replace my-2 p-2 duration-100 \n              rounded-lg\n              ".concat(_===t?"bg-blue-600 dark:bg-yellow-600":""),children:(0,r.jsx)("a",{className:"".concat(_===t?" text-white":" text-black dark:text-gray-300 "),children:e.title})},e.objectID))}),(0,r.jsx)(b,{totalPage:v,page:u,switchPage:e=>{J.current(y,e)}}),(0,r.jsxs)("div",{className:"flex items-center justify-between mt-2 sm:text-sm text-xs dark:text-gray-300",children:[0===w&&(0,r.jsx)("div",{className:"flex items-center",children:f.map((e,t)=>(0,r.jsxs)(m.Fragment,{children:[(0,r.jsx)("div",{className:"border-gray-300 dark:text-gray-300 text-gray-600 px-2 rounded border inline-block",children:e.key}),(0,r.jsx)("span",{className:"ml-2 mr-4  text-gray-600 dark:text-gray-300",children:e.action})]},t))}),(0,r.jsx)("div",{children:w>0&&(0,r.jsxs)("p",{children:["共搜索到 ",w," 条结果，用时 ",A," 毫秒"]})}),(0,r.jsx)("div",{className:"text-gray-600 dark:text-gray-300  text-right",children:(0,r.jsxs)("span",{children:[(0,r.jsx)("i",{className:"fa-brands fa-algolia"})," Algolia 提供搜索服务"]})})]})]}),(0,r.jsx)("div",{onClick:z,className:"z-30 fixed top-0 left-0 w-full h-full flex items-center justify-center glassmorphism"})]}):(0,r.jsx)(r.Fragment,{})}function p(){let{tagOptions:e}=(0,n.O)(),t=null==e?void 0:e.slice(0,10);return(0,r.jsx)("div",{id:"tags-group",className:"dark:border-gray-700 space-y-2",children:null==t?void 0:t.map((e,t)=>(0,r.jsx)(u.Z,{passHref:!0,href:"/tag/".concat(encodeURIComponent(e.name)),className:"cursor-pointer inline-block whitespace-nowrap",children:(0,r.jsxs)("div",{className:"flex items-center text-black dark:text-gray-300 hover:bg-blue-600 dark:hover:bg-yellow-600 hover:scale-110 hover:text-white rounded-lg px-2 py-0.5 duration-150 transition-all",children:[(0,r.jsxs)("div",{className:"text-lg",children:[e.name," "]}),e.count?(0,r.jsx)("sup",{className:"relative ml-1",children:e.count}):(0,r.jsx)(r.Fragment,{})]})},t))})}function b(e){let{totalPage:t,page:a,switchPage:l}=e;return t<=0?(0,r.jsx)(r.Fragment,{}):(0,r.jsx)("div",{className:"flex space-x-1 w-full justify-center py-1",children:Array.from({length:t},(e,t)=>{let s=a===t?"font-bold text-white bg-blue-600 dark:bg-yellow-600 rounded":"hover:text-blue-600 hover:font-bold dark:text-gray-300";return(0,r.jsx)("div",{onClick:()=>l(t),className:"text-center cursor-pointer w-6 h-6 ".concat(s),children:t+1},t)})})}},84588:function(e,t,a){a.d(t,{Z:function(){return l}});var r=a(78174);async function l(e){let{doms:t,search:a,target:l}=e;if(t&&a&&l)try{await (0,r.loadExternalResource)("https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js","js");let e=window.Mark;if(t instanceof HTMLCollection)for(let r of t){let t=RegExp(a,"gim");new e(r).markRegExp(t,l)}else{let r=RegExp(a,"gim");new e(t).markRegExp(r,l)}}catch(e){console.error("markjs 加载失败",e)}}}}]);